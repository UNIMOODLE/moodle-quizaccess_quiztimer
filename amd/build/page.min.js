define("quizaccess_quiztimer/page",(function(require,exports,module){return{init:function(data){var attemptid=data.attemptid,tiempos=data.tiempos;const backgroundColors=["#ca3120","#d73422","#dd3d2b","#e04938","#e25546","#e46153","#e66d60","#e8796d","#ea867a","#ec9288","#ee9e95","#f0aaa2","#f2b6af","#f4c2bc","#f7ceca","#f9dad7","#fbe6e4"],textColors=["#fff","#fff","#fff","#fff","#fff","#fff","#fff","#1d2125","#1d2125","#1d2125","#1d2125","#1d2125","#1d2125","#1d2125","#1d2125","#1d2125","#1d2125"];var divElement=document.getElementById("quiz-timer");divElement.disabled=!0,divElement.innerHTML="Timer disabled";var currentPageURL=window.location.href,pageID=new URLSearchParams(currentPageURL).get("page");null===pageID&&(pageID=0);var countdownID="countdown"+pageID,quiztimercountdown=document.createElement("div");quiztimercountdown.id=countdownID,quiztimercountdown.className="countdown-section",quiztimercountdown.style.maxWidth="max-content",quiztimercountdown.style.marginLeft="auto";var existingDiv=document.querySelector(".container-fluid.tertiary-navigation");existingDiv.parentNode.insertBefore(quiztimercountdown,existingDiv.nextSibling);var headingElement=document.querySelectorAll(".container-fluid.tertiary-navigation");var endTime=tiempos[pageID]+Math.floor(Date.now()/1e3),storedTime=localStorage.getItem("countdown"+pageID);null!==storedTime&&(endTime=parseInt(storedTime)+Math.floor(Date.now()/1e3),localStorage.removeItem("countdown"+pageID)),function(endTime){var countdownElement=document.getElementById("countdown"+pageID),countdownInterval=setInterval((function(){var currentTime=Math.floor(Date.now()/1e3),timeRemaining=endTime-1-currentTime;var currentPercentage=timeRemaining/(endTime-(endTime-1))*10;if(countdownElement.style.backgroundColor=backgroundColors[currentPercentage/10],countdownElement.style.color=function(percentage){return textColors[percentage/10]}(currentPercentage),timeRemaining<=-1){clearInterval(countdownInterval);var button=document.getElementById("mod_quiz-next-nav");return localStorage.setItem("countdown"+pageID,0),countdownElement.innerHTML="00:00:00",countdownElement.disabled=!0,void button.click()}(button=document.getElementById("mod_quiz-next-nav"))&&button.addEventListener("click",(function(){localStorage.setItem("countdown"+pageID,timeRemaining)})),window.addEventListener("beforeunload",(function(){document.getElementById("countdown"+pageID),localStorage.setItem("countdown"+pageID,timeRemaining),localStorage.setItem("attempt",JSON.stringify(attemptid))}));var hours=Math.floor(timeRemaining/3600),minutes=Math.floor(timeRemaining%3600/60),seconds=timeRemaining%60,formattedTime=hours.toString().padStart(2,"0")+":"+minutes.toString().padStart(2,"0")+":"+seconds.toString().padStart(2,"0");countdownElement.innerHTML=formattedTime}),1)}(endTime+1),headingElement.forEach((function(headingElement,index){var textoElement=document.getElementById("countdown"+index);headingElement&&textoElement&&headingElement.appendChild(textoElement)}))}}}));

//# sourceMappingURL=page.min.js.map