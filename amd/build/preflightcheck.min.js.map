{"version":3,"file":"preflightcheck.min.js","sources":["../src/preflightcheck.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n/**\n * @license     http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\ndefine(['jquery', 'core/str'], function($, str) {\n\n    const change_quiz_form = (e) => {\n        target = e.currentTarget;\n        let va = target.value;\n        va = target.webroot + va;\n        window.location.href = va;\n    }\n    selectstrings = str.get_strings([{key: 'questions', component: 'quiz'},\n                                {key: 'quiztime', component: 'quizaccess_quiztimer'},]);\n        return {\n            init: function(cmid, editmethod, webroot) {           \n                $(document).ready(function() {\n                    if ($('.custom-select.urlselect.timeselect')[0] !=undefined ) {\n                        $.when(selectstrings).done(function(selectstrings) {\n                            select = $('.custom-select.urlselect.timeselect')[0];\n                            select.add(new Option(selectstrings[1], '/mod/quiz/accessrule/quiztimer/edit.php?cmid=' + cmid +\n                            '&editmethod=time'));\n                        });\n\n                    } else {\n                        $.when(selectstrings).done(function(selectstrings) {\n                            select = document.createElement('select');\n                            select.setAttribute('class', 'custom-select urlselect timeselect');\n                            select.setAttribute('id', 'id_quiztimer_editviewselector');\n\n                            if (editmethod == 'time') {\n                                select.add(new Option(selectstrings[1], '/mod/quiz/accessrule/quiztimer/edit.php?cmid=' + cmid +\n                                 ''));\n                                select.add(new Option(selectstrings[0], '/mod/quiz/edit.php?cmid=' + cmid + '') );\n\n                            } else {\n                                select.add(new Option(selectstrings[0], '/mod/quiz/edit.php?cmid=' + cmid + '') );\n                                select.add(new Option(selectstrings[1], '/mod/quiz/accessrule/quiztimer/edit.php?cmid=' + cmid +\n                                 '&editmethod=time'));\n                            }\n                            let qactions = $('.mod_quiz-edit-action-buttons')[0];\n                            qactions == null ? $('.activity-header')[0].append(select) : qactions.append(select);\n                            select.webroot = webroot;\n                            select.addEventListener('change', change_quiz_form, true);\n                        })\n                    }\n                });\n            }\n        }\n});"],"names":["define","$","str","change_quiz_form","e","target","currentTarget","va","value","webroot","window","location","href","selectstrings","get_strings","key","component","init","cmid","editmethod","document","ready","undefined","when","done","select","add","Option","createElement","setAttribute","qactions","append","addEventListener"],"mappings":";;;AAkBAA,6CAAO,CAAC,SAAU,aAAa,SAASC,EAAGC,WAEjCC,iBAAoBC,IACtBC,OAASD,EAAEE,kBACPC,GAAKF,OAAOG,MAChBD,GAAKF,OAAOI,QAAUF,GACtBG,OAAOC,SAASC,KAAOL,WAE3BM,cAAgBX,IAAIY,YAAY,CAAC,CAACC,IAAK,YAAaC,UAAW,QACnC,CAACD,IAAK,WAAYC,UAAW,0BAC9C,CACHC,KAAM,SAASC,KAAMC,WAAYV,SAC7BR,EAAEmB,UAAUC,OAAM,WACoCC,MAA9CrB,EAAE,uCAAuC,GACzCA,EAAEsB,KAAKV,eAAeW,MAAK,SAASX,eAChCY,OAASxB,EAAE,uCAAuC,GAClDwB,OAAOC,IAAI,IAAIC,OAAOd,cAAc,GAAI,gDAAkDK,KAC1F,wBAIJjB,EAAEsB,KAAKV,eAAeW,MAAK,SAASX,eAChCY,OAASL,SAASQ,cAAc,UAChCH,OAAOI,aAAa,QAAS,sCAC7BJ,OAAOI,aAAa,KAAM,iCAER,QAAdV,YACAM,OAAOC,IAAI,IAAIC,OAAOd,cAAc,GAAI,gDAAkDK,OAE1FO,OAAOC,IAAI,IAAIC,OAAOd,cAAc,GAAI,2BAA6BK,SAGrEO,OAAOC,IAAI,IAAIC,OAAOd,cAAc,GAAI,2BAA6BK,OACrEO,OAAOC,IAAI,IAAIC,OAAOd,cAAc,GAAI,gDAAkDK,KACzF,0BAEDY,SAAW7B,EAAE,iCAAiC,GACtC,MAAZ6B,SAAmB7B,EAAE,oBAAoB,GAAG8B,OAAON,QAAUK,SAASC,OAAON,QAC7EA,OAAOhB,QAAUA,QACjBgB,OAAOO,iBAAiB,SAAU7B,kBAAkB"}