{"version":3,"file":"preflightcheck.min.js","sources":["../src/preflightcheck.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <https://www.gnu.org/licenses/>.\n// Project implemented by the \\\"Recovery, Transformation and Resilience Plan.\n// Funded by the European Union - Next GenerationEU\\\".\n//\n// Produced by the UNIMOODLE University Group: Universities of\n// Valladolid, Complutense de Madrid, UPV/EHU, León, Salamanca,\n// Illes Balears, Valencia, Rey Juan Carlos, La Laguna, Zaragoza, Málaga,\n// Córdoba, Extremadura, Vigo, Las Palmas de Gran Canaria y Burgos.\n\n/**\n * Version details\n *\n * @package    quizaccess_quiztimer\n * @copyright  2023 Proyecto UNIMOODLE\n * @author     UNIMOODLE Group (Coordinator) <direccion.area.estrategia.digital@uva.es>\n * @author     ISYC <soporte@isyc.com>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine(['jquery', 'core/str', 'core/notification'], function($, str, notification) {\n\n    const change_quiz_form = (e) => {\n        target = e.currentTarget;\n        let va = target.value;\n        va = target.webroot + va;\n        window.location.href = va;\n    }\n    selectstrings = str.get_strings([{key: 'questions', component: 'quiz'},\n                                {key: 'quiztime', component: 'quizaccess_quiztimer'},\n                                {key: 'pagingchangesnotapply', component: 'quizaccess_quiztimer'}, ]);\n        return {\n            init: function(cmid, editmethod, webroot) {\n                $(document).ready(function() {\n                    if ($('.custom-select.urlselect.timeselect')[0] !=undefined ) {\n                        $.when(selectstrings).done(function(selectstrings) {\n                            select = $('.custom-select.urlselect.timeselect')[0];\n                            select.add(new Option(selectstrings[1], '/mod/quiz/accessrule/quiztimer/edit.php?cmid=' + cmid +\n                            '&editmethod=time'));\n                        });\n\n                    } else {\n                        $.when(selectstrings).done(function(selectstrings) {\n                            select = document.createElement('select');\n                            select.setAttribute('class', 'custom-select urlselect timeselect');\n                            select.setAttribute('id', 'id_quiztimer_editviewselector');\n\n                            if (editmethod == 'time') {\n                                select.add(new Option(selectstrings[1], '/mod/quiz/accessrule/quiztimer/edit.php?cmid=' + cmid +\n                                 ''));\n                                select.add(new Option(selectstrings[0], '/mod/quiz/edit.php?cmid=' + cmid + '') );\n\n                            } else {\n                                select.add(new Option(selectstrings[0], '/mod/quiz/edit.php?cmid=' + cmid + '') );\n                                select.add(new Option(selectstrings[1], '/mod/quiz/accessrule/quiztimer/edit.php?cmid=' + cmid +\n                                 '&editmethod=time'));\n                                 if (editmethod == 'section' || editmethod == 'slots') {\n                                    notification.addNotification({\n                                        message: selectstrings[2],\n                                        type: \"warning\"\n                                     });\n                                     let pagebreaks = document.querySelectorAll('.page_split_join');\n                                     pagebreaks.forEach(pagebreak => {\n                                        pagebreak.addEventListener('click', function() {\n                                            alert(selectstrings[2]);\n                                        })\n                                     });\n                                }\n                            }\n                            let qactions = $('.mod_quiz-edit-action-buttons')[0];\n                            qactions == null ? $('.activity-header')[0].append(select) : qactions.append(select);\n                            select.webroot = webroot;\n                            select.addEventListener('change', change_quiz_form, true);\n                        })\n                    }\n                });\n            }\n        }\n});"],"names":["define","$","str","notification","change_quiz_form","e","target","currentTarget","va","value","webroot","window","location","href","selectstrings","get_strings","key","component","init","cmid","editmethod","document","ready","undefined","when","done","select","add","Option","createElement","setAttribute","addNotification","message","type","querySelectorAll","forEach","pagebreak","addEventListener","alert","qactions","append"],"mappings":";;;;;;;;;AA+BAA,6CAAO,CAAC,SAAU,WAAY,sBAAsB,SAASC,EAAGC,IAAKC,oBAE3DC,iBAAoBC,IACtBC,OAASD,EAAEE,kBACPC,GAAKF,OAAOG,MAChBD,GAAKF,OAAOI,QAAUF,GACtBG,OAAOC,SAASC,KAAOL,WAE3BM,cAAgBZ,IAAIa,YAAY,CAAC,CAACC,IAAK,YAAaC,UAAW,QACnC,CAACD,IAAK,WAAYC,UAAW,wBAC7B,CAACD,IAAK,wBAAyBC,UAAW,0BAC3D,CACHC,KAAM,SAASC,KAAMC,WAAYV,SAC7BT,EAAEoB,UAAUC,OAAM,WACoCC,MAA9CtB,EAAE,uCAAuC,GACzCA,EAAEuB,KAAKV,eAAeW,MAAK,SAASX,eAChCY,OAASzB,EAAE,uCAAuC,GAClDyB,OAAOC,IAAI,IAAIC,OAAOd,cAAc,GAAI,gDAAkDK,KAC1F,wBAIJlB,EAAEuB,KAAKV,eAAeW,MAAK,SAASX,kBAChCY,OAASL,SAASQ,cAAc,UAChCH,OAAOI,aAAa,QAAS,sCAC7BJ,OAAOI,aAAa,KAAM,iCAER,QAAdV,WACAM,OAAOC,IAAI,IAAIC,OAAOd,cAAc,GAAI,gDAAkDK,OAE1FO,OAAOC,IAAI,IAAIC,OAAOd,cAAc,GAAI,2BAA6BK,eAGrEO,OAAOC,IAAI,IAAIC,OAAOd,cAAc,GAAI,2BAA6BK,OACrEO,OAAOC,IAAI,IAAIC,OAAOd,cAAc,GAAI,gDAAkDK,KACzF,qBACkB,WAAdC,YAAyC,SAAdA,WAAuB,CACnDjB,aAAa4B,gBAAgB,CACzBC,QAASlB,cAAc,GACvBmB,KAAM,YAEQZ,SAASa,iBAAiB,oBAChCC,SAAQC,YAChBA,UAAUC,iBAAiB,SAAS,WAChCC,MAAMxB,cAAc,cAKhCyB,SAAWtC,EAAE,iCAAiC,GACtC,MAAZsC,SAAmBtC,EAAE,oBAAoB,GAAGuC,OAAOd,QAAUa,SAASC,OAAOd,QAC7EA,OAAOhB,QAAUA,QACjBgB,OAAOW,iBAAiB,SAAUjC,kBAAkB"}